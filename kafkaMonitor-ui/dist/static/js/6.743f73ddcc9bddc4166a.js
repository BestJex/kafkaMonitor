webpackJsonp([6],{"3JmX":function(e,t){},JM0i:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("PKbQ"),r=o("fc7Y"),n=o.n(r),s={name:"zookeeperServer",data:function(){return{addressSearch:"",form:{address:"",name:""},rules:{address:[{validator:function(e,t,o){""===t?o(new Error("请输入服务地址")):new RegExp("[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(t)||o(new Error("服务地址非法(示例:10.80.0.55:2181)"));o()},trigger:"blur"}],name:[{validator:function(e,t,o){if(!t||""===t)return o(new Error("请输入名称"));o()},trigger:"blur"}]},addZooKeeperDialogShow:!1,testingConn:!1,zookeeperTableData:[],loading:!1}},methods:{formatCreateDate:function(e,t){var o=new Date(e.createDate);return n.a.format(o,"yyyy-MM-dd HH:mm:ss")},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&Object(a.b)(t.form.address,t.form.name,!1).then(function(e){if(e){var o=e.data.code;console.info(e.data),200===o?(t.$message({showClose:!0,message:"添加成功",type:"success"}),t.handleDialogClose(),t.getZooKeeperServerListMethod()):t.$message({showClose:!0,message:"添加失败:"+e.data.msg,type:"error"})}t.testingConn=!1})})},deleteZookeeperMethod:function(e,t){var o=this;Object(a.b)(e,t,!0).then(function(e){if(e){var t=e.data.code;console.info(e.data),200===t?(o.$message({showClose:!0,message:"删除成功",type:"success"}),o.getZooKeeperServerListMethod()):o.$message({showClose:!0,message:"删除失败:"+e.data.msg,type:"error"})}o.testingConn=!1})},getZooKeeperServerListMethod:function(){var e=this;this.loading=!0,Object(a.a)().then(function(t){if(t){var o=t.data;if(200===o.code){o=o.data,e.zookeeperTableData=[];for(var a=0;a<o.length;a++)e.zookeeperTableData.push(o[a])}}}),this.loading=!1},handleDialogClose:function(){this.resetForm("form"),this.addZooKeeperDialogShow=!1},handleDialogOpen:function(){this.addZooKeeperDialogShow=!0},handleDelete:function(e,t){var o=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.deleteZookeeperMethod(t.address,t.name)}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},resetForm:function(e){var t=this;this.$nextTick(function(){void 0!==t.$refs[e]&&t.$refs[e].resetFields()})},checkAddress:function(e){var t=this;""!==e?new RegExp("[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)?(this.testingConn=!0,Object(a.c)(e).then(function(e){e&&(200!==e.data.code?t.$notify.error({title:"服务不可用",message:e.data.msg}):t.$notify({title:"连接成功",type:"success"}));t.testingConn=!1})):this.$message({showClose:!0,message:"服务地址非法(示例:10.80.0.55:2181)",type:"error"}):this.$message({showClose:!0,message:"请输入服务地址",type:"error"})}},mounted:function(){this.getZooKeeperServerListMethod()}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("el-row",{staticStyle:{margin:"40px 0 0 0"},attrs:{gutter:20}},[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addZooKeeperDialogShow=!0}}},[e._v("添加zookeeper")])],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"920px"},attrs:{data:e.zookeeperTableData.filter(function(t){return!e.addressSearch||t.address.toLowerCase().includes(e.addressSearch.toLowerCase())})}},[o("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{prop:"address",label:"zookeeper地址",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{sortable:"",prop:"createDate",label:"创建日期",formatter:e.formatCreateDate,width:"200"}}),e._v(" "),o("el-table-column",{attrs:{prop:"createBy",label:"创建人",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{align:"right",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.addressSearch,callback:function(t){e.addressSearch=t},expression:"addressSearch"}})]}},{key:"default",fn:function(t){return[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[o("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-delete"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:"添加",visible:e.addZooKeeperDialogShow,width:"40%"},on:{open:e.handleDialogOpen,close:e.handleDialogClose}},[o("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"名称",prop:"name"}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:15}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"服务地址",prop:"address"}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:15}},[o("el-input",{attrs:{autocomplete:"off",placeholder:"ip:port"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.testingConn,expression:"!testingConn"}],on:{click:function(t){return e.checkAddress(e.form.address)}}},[e._v("连接测试")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.testingConn,expression:"testingConn"}],attrs:{disabled:""}},[e._v("正在连接 "),o("i",{staticClass:"el-icon-loading"})])],1)],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("确定")]),e._v(" "),o("el-button",{on:{click:function(t){return e.handleDialogClose()}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var l=o("VU/8")(s,i,!1,function(e){o("3JmX")},"data-v-3e702b32",null);t.default=l.exports},PKbQ:function(e,t,o){"use strict";t.a=function(){return a.a.get(r)},t.b=function(e,t,o){return a.a.post(n,{address:e,name:t,deleted:o})},t.c=function(e){return a.a.get(s,{address:e})};var a=o("7I1f"),r="/api/zookeeper/getZooKeeperServerList",n="/api/zookeeper/save",s="/api/zookeeper/testConn"}});
//# sourceMappingURL=6.743f73ddcc9bddc4166a.js.map