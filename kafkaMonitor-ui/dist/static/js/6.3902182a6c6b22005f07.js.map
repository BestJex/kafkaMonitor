{"version":3,"sources":["webpack:///./src/api/kafkaOperateApi.js","webpack:///src/components/pages/kafka/operate/Topic.vue","webpack:///./src/components/pages/kafka/operate/Topic.vue?7964","webpack:///./src/components/pages/kafka/operate/Topic.vue","webpack:///./src/api/zookeeperApi.js"],"names":["getTopicListUrl","createTopicUrl","deleteTopicUrl","topicExistsUrl","getTopicPartitionDetailUrl","Topic","name","data","zookeeper","zookeeperList","topicList","partitions","replication","topic","topicTableData","topicSearch","addTopicDialogShow","topicPartitionDetailDialogShow","addTopicForm","rules","topicPartitionDetailTableData","loading","methods","zookeeperChangeMethod","this","getTopicListMethod","_this","request","get","then","response","code","Date","i","length","push","getZooKeeperServerListMethod","_this2","Object","zookeeperApi","getTopicPartitionDetailMethod","index","row","_this3","formatCreateDate","column","date","createDate","date_default","a","format","deleteTopicMethod","_this4","deleteTopic","$message","showClose","message","type","topicTableDataCopy","msg","topicExistsMethod","_this5","handleEdit","console","log","handleDelete","_this6","$confirm","confirmButtonText","cancelButtonText","catch","handleDialogOpen","handleDialogClose","resetForm","submitForm","formName","_this7","$refs","validate","valid","_this8","$nextTick","undefined","resetFields","mounted","operate_Topic","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","gutter","span","_v","placeholder","size","on","change","model","value","callback","$$v","expression","_l","item","key","label","address","staticStyle","float","_s","color","font-size","click","$event","$router","margin","directives","rawName","width","filter","toLowerCase","includes","prop","sortable","formatter","align","scopedSlots","_u","fn","scope","effect","content","placement","plain","icon","$index","title","visible","open","close","ref","status-icon","label-width","$set","slot","update:visible","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","getZooKeeperServerListUrl","deleted","post","saveZookeeperServerUrl","testConnUrl","__WEBPACK_IMPORTED_MODULE_0__request__"],"mappings":"0IAEMA,EAAkB,kCAClBC,EAAiB,iCACjBC,EAAiB,iCACjBC,EAAiB,iCAEjBC,EAA6B,kFC8InCC,GACAC,KAAA,GACAC,KAFA,WAGA,OACAC,UAAA,GACAC,iBACAC,aACAC,WAAA,EACAC,YAAA,EACAC,MAAA,WACAC,kBACAC,YAAA,GACAC,oBAAA,EACAC,gCAAA,EACAC,cACAL,MAAA,GACAD,YAAA,EACAD,WAAA,GAGAQ,SAWAC,iCACAC,SAAA,IAGAC,SACAC,sBADA,WAEAC,KAAAC,sBAEAA,mBAJA,WAIA,IDnL6BjB,ECmL7BkB,EAAAF,KACAA,KAAAhB,WAAA,KAAAgB,KAAAhB,WAIAgB,KAAAH,SAAA,GDxL6Bb,ECyL7BgB,KAAAhB,UDxLSmB,IAAQC,IAAI5B,GAAkBQ,UAAWA,KCwLlDqB,KAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAvB,EAAAuB,EAAAvB,KACA,SAAAA,EAAAwB,KAAA,CACAxB,SACAmB,EAAAhB,aACAgB,EAAAZ,kBACA,IAAAkB,KACA,IADA,IACAC,EAAA,EAAAA,EAAA1B,EAAA2B,OAAAD,IACAP,EAAAhB,UAAAyB,KAAA5B,EAAA0B,GAAApB,OACAa,EAAAZ,eAAAqB,KAAA5B,EAAA0B,KAIAP,EAAAL,SAAA,KAlBAG,KAAAH,SAAA,GAqBAe,6BA3BA,WA2BA,IAAAC,EAAAb,KACMc,OAAAC,EAAA,EAAAD,GAANT,KAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAvB,EAAAuB,EAAAvB,KACA,SAAAA,EAAAwB,KAAA,CACAxB,SACA8B,EAAA5B,iBACA,QAAAwB,EAAA,EAAAA,EAAA1B,EAAA2B,OAAAD,IACAI,EAAA5B,cAAA0B,KAAA5B,EAAA0B,SAMAO,8BAzCA,SAyCAC,EAAAC,GAAA,IDnMwClC,EAAWK,ECmMnD8B,EAAAnB,MDnMwChB,ECoMxCgB,KAAAhB,UDpMmDK,ECoMnD6B,EAAA7B,MDnMSc,IAAQC,IAAIxB,GAA6BI,UAAWA,EAAWK,MAAOA,KCmM/EgB,KAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAvB,EAAAuB,EAAAvB,KACA,SAAAA,EAAAwB,KAAA,CACAY,EAAAvB,iCACAb,SACA,QAAA0B,EAAA,EAAAA,EAAA1B,EAAA2B,OAAAD,IACAU,EAAAvB,8BAAAe,KAAA5B,EAAA0B,IAEAU,EAAA1B,gCAAA,OAKA2B,iBAAA,SAAAF,EAAAG,GACA,IAAAC,EAAA,IAAAd,KAAAU,EAAAK,YACA,OAAAC,EAAAC,EAAAC,OAAAJ,EAAA,wBAEAK,kBA5DA,SA4DA3C,EAAAK,GAAA,IAAAuC,EAAA5B,MD9NO,SAAqBhB,EAAWK,GACrC,OAAOc,IAAQC,IAAI1B,GAAiBM,UAAWA,EAAWK,MAAOA,KC8N7DwC,CAAN7C,EAAAK,GAAAgB,KAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAvB,EAAAuB,EAAAvB,KACA,SAAAA,EAAAwB,KAAA,CACAqB,EAAAE,UAEAC,WAAA,EACAC,QAAA3C,EAAA,OACA4C,KAAA,YAGA,IAAAC,EAAAN,EAAAtC,eACAsC,EAAAtC,kBACA,QAAAmB,EAAA,EAAAA,EAAAyB,EAAAxB,OAAAD,IACAyB,EAAAzB,GAAApB,WACAuC,EAAAtC,eAAAqB,KAAAuB,EAAAzB,SAIAmB,EAAAE,UAEAC,WAAA,EACAC,QAAAjD,EAAAoD,IACAF,KAAA,cAMAG,kBA1FA,WA0FA,IDxP4BpD,EAAWK,ECwPvCgD,EAAArC,MDxP4BhB,ECyP5BgB,KAAAhB,UDzPuCK,ECyPvCW,KAAAX,MDxPSc,IAAQC,IAAIzB,GAAiBK,UAAWA,EAAWK,MAAOA,KCwPnEgB,KAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAvB,EAAAuB,EAAAvB,KACA,MAAAA,EAAAwB,KACA8B,EAAAP,UAEAC,WAAA,EACAC,QAAAK,EAAAhD,MAAA,KACA4C,KAAA,YAEA,MAAAlD,EAAAwB,KACA8B,EAAAP,UAEAC,WAAA,EACAC,QAAAK,EAAAhD,MAAA,MACA4C,KAAA,YAGAI,EAAAP,UAEAC,WAAA,EACAC,QAAAjD,EAAAoD,IACAF,KAAA,cAMAK,WAvHA,SAuHArB,EAAAC,GACAqB,QAAAC,IAAAvB,EAAAC,IAEAuB,aA1HA,SA0HAxB,EAAAC,GAAA,IAAAwB,EAAA1C,KACAA,KAAA2C,SAAA,cACAC,kBAAA,KACAC,iBAAA,KACAZ,KAAA,YACA5B,KAAA,WAEAqC,EAAAf,kBAAAe,EAAA1D,UAAAkC,EAAA7B,SAEAyD,MAAA,WACAJ,EAAAZ,UACAG,KAAA,OACAD,QAAA,aAIAe,iBA1IA,WA4IA/C,KAAAR,oBAAA,GAEAwD,kBA9IA,WA+IAhD,KAAAiD,UAAA,gBACAjD,KAAAR,oBAAA,GAEA0D,WAlJA,SAkJAC,GAAA,IAAAC,EAAApD,KACAA,KAAAqD,MAAAF,GAAAG,SAAA,SAAAC,GD9TO,IAAqBvE,EAAWK,EAAOF,EAAYC,EC+T1DmE,ID/T4BvE,ECgU5BoE,EAAApE,UDhUuCK,ECgUvC+D,EAAA1D,aAAAL,MDhU8CF,ECgU9CiE,EAAA1D,aAAAP,WDhU0DC,ECgU1DgE,EAAA1D,aAAAN,YD/TSe,IAAQC,IAAI3B,GACjBO,UAAWA,EACXK,MAAOA,EACPF,WAAYA,EACZC,YAAaA,KC2TjBiB,KAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAvB,EAAAuB,EAAAvB,KACA,MAAAA,EAAAwB,MACA6C,EAAAtB,UAEAC,WAAA,EACAC,QAAAoB,EAAA/D,MAAA,OACA4C,KAAA,YAEAmB,EAAAnD,qBACAmD,EAAAJ,qBAEAI,EAAAtB,UAEAC,WAAA,EACAC,QAAAjD,EAAAoD,IACAF,KAAA,gBAQAgB,UA9KA,SA8KAE,GAAA,IAAAK,EAAAxD,KACAA,KAAAyD,UAAA,gBACAC,IAAAF,EAAAH,MAAAF,IACAK,EAAAH,MAAAF,GAAAQ,kBAKAC,QAzNA,WA0NA5D,KAAAY,+BACAZ,KAAAC,uBC7We4D,GADEC,OAFjB,WAA0B,IAAAC,EAAA/D,KAAagE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,cAAwBF,EAAA,UAAeG,OAAOC,OAAA,KAAYJ,EAAA,UAAeG,OAAOE,KAAA,KAAUL,EAAA,QAAAH,EAAAS,GAAA,oBAAAT,EAAAS,GAAA,KAAAN,EAAA,UAAiEG,OAAOE,KAAA,KAAUL,EAAA,aAAkBG,OAAOI,YAAA,eAAAC,KAAA,QAA2CC,IAAKC,OAAAb,EAAAhE,uBAAmC8E,OAAQC,MAAAf,EAAA,UAAAgB,SAAA,SAAAC,GAA+CjB,EAAA/E,UAAAgG,GAAkBC,WAAA,cAAyBlB,EAAAmB,GAAAnB,EAAA,uBAAAoB,EAAAlE,GAAiD,OAAAiD,EAAA,aAAuBkB,IAAAnE,EAAAoD,OAAiBgB,MAAAF,EAAArG,KAAAgG,MAAAK,EAAAG,WAAwCpB,EAAA,QAAaqB,aAAaC,MAAA,UAAgBzB,EAAAS,GAAAT,EAAA0B,GAAAN,EAAArG,SAAAiF,EAAAS,GAAA,KAAAN,EAAA,QAAqDqB,aAAaC,MAAA,QAAAE,MAAA,UAAAC,YAAA,UAAsD5B,EAAAS,GAAAT,EAAA0B,GAAAN,EAAAG,gBAAmC,OAAAvB,EAAAS,GAAA,KAAAN,EAAA,UAAkCG,OAAOE,KAAA,KAAUL,EAAA,aAAkBG,OAAOpC,KAAA,UAAAyC,KAAA,QAA+BC,IAAKiB,MAAA,SAAAC,GAAyB,OAAA9B,EAAA+B,QAAAnF,KAAA,kCAAwDoD,EAAAS,GAAA,iCAAAT,EAAAS,GAAA,KAAAN,EAAA,UAAmEqB,aAAaQ,OAAA,cAAsB1B,OAAQC,OAAA,MAAaJ,EAAA,UAAeG,OAAOE,KAAA,KAAUL,EAAA,aAAkBG,OAAOpC,KAAA,UAAAyC,KAAA,QAA+BC,IAAKiB,MAAA,SAAAC,GAAyB9B,EAAAvE,oBAAA,MAAgCuE,EAAAS,GAAA,qBAAAT,EAAAS,GAAA,KAAAN,EAAA,YAAyD8B,aAAalH,KAAA,UAAAmH,QAAA,YAAAnB,MAAAf,EAAA,QAAAkB,WAAA,YAA4EM,aAAeW,MAAA,SAAgB7B,OAAQtF,KAAAgF,EAAAzE,eAAA6G,OAAA,SAAApH,GAAkD,OAAAgF,EAAAxE,aAAAR,EAAAM,MAAA+G,cAAAC,SAAAtC,EAAAxE,YAAA6G,oBAAkGlC,EAAA,mBAAwBG,OAAOiC,KAAA,QAAAjB,MAAA,UAAAa,MAAA,SAAgDnC,EAAAS,GAAA,KAAAN,EAAA,mBAAoCG,OAAOkC,SAAA,GAAAD,KAAA,aAAAjB,MAAA,OAAAmB,UAAAzC,EAAA3C,iBAAA8E,MAAA,SAAiGnC,EAAAS,GAAA,KAAAN,EAAA,mBAAoCG,OAAOiC,KAAA,WAAAjB,MAAA,MAAAa,MAAA,SAA+CnC,EAAAS,GAAA,KAAAN,EAAA,mBAAoCG,OAAOoC,MAAA,QAAAP,MAAA,OAA8BQ,YAAA3C,EAAA4C,KAAsBvB,IAAA,SAAAwB,GAAA,SAAAC,GAAgC,OAAA3C,EAAA,YAAuBG,OAAOK,KAAA,OAAAD,YAAA,WAAsCI,OAAQC,MAAAf,EAAA,YAAAgB,SAAA,SAAAC,GAAiDjB,EAAAxE,YAAAyF,GAAoBC,WAAA,qBAAiCG,IAAA,UAAAwB,GAAA,SAAAC,GAAiC,OAAA3C,EAAA,cAAyBE,YAAA,OAAAC,OAA0ByC,OAAA,OAAAC,QAAA,OAAAC,UAAA,eAA0D9C,EAAA,aAAkBG,OAAOK,KAAA,OAAAzC,KAAA,UAAAgF,MAAA,GAAAC,KAAA,gBAAgEvC,IAAKiB,MAAA,SAAAC,GAAyB,OAAA9B,EAAA/C,8BAAA6F,EAAAM,OAAAN,EAAA3F,UAAoE,GAAA6C,EAAAS,GAAA,KAAAN,EAAA,cAAmCE,YAAA,OAAAC,OAA0ByC,OAAA,OAAAC,QAAA,KAAAC,UAAA,eAAwD9C,EAAA,aAAkBG,OAAOK,KAAA,OAAAzC,KAAA,SAAAgF,MAAA,GAAAC,KAAA,kBAAiEvC,IAAKiB,MAAA,SAAAC,GAAyB,OAAA9B,EAAAtB,aAAAoE,EAAAM,OAAAN,EAAA3F,UAAmD,WAAW,GAAA6C,EAAAS,GAAA,KAAAN,EAAA,aAAkCG,OAAO+C,MAAA,UAAAC,QAAAtD,EAAAvE,mBAAA0G,MAAA,OAAiEvB,IAAK2C,KAAAvD,EAAAhB,iBAAAwE,MAAAxD,EAAAf,qBAA2DkB,EAAA,WAAgBsD,IAAA,eAAApD,YAAA,gBAAAC,OAAsDQ,MAAAd,EAAArE,aAAA+H,cAAA,GAAAC,cAAA,WAAiExD,EAAA,gBAAqBG,OAAOgB,MAAA,UAAAiB,KAAA,WAAkCpC,EAAA,UAAeG,OAAOE,KAAA,MAAWL,EAAA,YAAiBW,OAAOC,MAAAf,EAAArE,aAAA,MAAAqF,SAAA,SAAAC,GAAwDjB,EAAA4D,KAAA5D,EAAArE,aAAA,QAAAsF,IAAyCC,WAAA,yBAAkC,OAAAlB,EAAAS,GAAA,KAAAN,EAAA,gBAAyCG,OAAOgB,MAAA,MAAAiB,KAAA,gBAAmCpC,EAAA,UAAeG,OAAOE,KAAA,MAAWL,EAAA,YAAiBW,OAAOC,MAAAf,EAAArE,aAAA,WAAAqF,SAAA,SAAAC,GAA6DjB,EAAA4D,KAAA5D,EAAArE,aAAA,aAAAsF,IAA8CC,WAAA,8BAAuC,OAAAlB,EAAAS,GAAA,KAAAN,EAAA,gBAAyCG,OAAOgB,MAAA,MAAAiB,KAAA,iBAAoCpC,EAAA,UAAeG,OAAOE,KAAA,MAAWL,EAAA,YAAiBW,OAAOC,MAAAf,EAAArE,aAAA,YAAAqF,SAAA,SAAAC,GAA8DjB,EAAA4D,KAAA5D,EAAArE,aAAA,cAAAsF,IAA+CC,WAAA,+BAAwC,WAAAlB,EAAAS,GAAA,KAAAN,EAAA,OAAoCE,YAAA,gBAAAC,OAAmCuD,KAAA,UAAgBA,KAAA,WAAe1D,EAAA,aAAkBS,IAAIiB,MAAA,SAAAC,GAAyB9B,EAAAvE,oBAAA,MAAiCuE,EAAAS,GAAA,SAAAT,EAAAS,GAAA,KAAAN,EAAA,aAA8CG,OAAOpC,KAAA,WAAiB0C,IAAKiB,MAAA,SAAAC,GAAyB,OAAA9B,EAAAb,WAAA,oBAAwCa,EAAAS,GAAA,iBAAAT,EAAAS,GAAA,KAAAN,EAAA,aAAsDG,OAAO+C,MAAA,OAAAC,QAAAtD,EAAAtE,+BAAAyG,MAAA,OAA0EvB,IAAKkD,iBAAA,SAAAhC,GAAkC9B,EAAAtE,+BAAAoG,MAA4C3B,EAAA,YAAiBqB,aAAaW,MAAA,SAAgB7B,OAAQtF,KAAAgF,EAAAnE,iCAA0CsE,EAAA,mBAAwBG,OAAOiC,KAAA,QAAAjB,MAAA,QAAAa,MAAA,SAA8CnC,EAAAS,GAAA,KAAAN,EAAA,mBAAoCG,OAAOiC,KAAA,YAAAjB,MAAA,KAAAa,MAAA,QAA8CnC,EAAAS,GAAA,KAAAN,EAAA,mBAAoCG,OAAOiC,KAAA,UAAAjB,MAAA,OAAAa,MAAA,UAA+C,YAEzvJ4B,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpJ,EACAgF,GATF,EAVA,SAAAqE,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB,2CC1BhCI,EAAA,EAQO,WACL,OAAOhI,IAAQC,IAAIgI,IATrBD,EAAA,EAYO,SAA6B7C,EAASxG,EAAMuJ,GACjD,OAAOlI,IAAQmI,KAAKC,GAClBjD,QAAWA,EACXxG,KAAQA,EACRuJ,QAAWA,KAhBfF,EAAA,EAoBO,SAAkB7C,GACvB,OAAOnF,IAAQC,IAAIoI,GAAclD,QAASA,KArB5C,IAAAmD,EAAAT,EAAA,QAEMI,EAA4B,wCAC5BG,EAAyB,sBACzBC,EAAc","file":"static/js/6.3902182a6c6b22005f07.js","sourcesContent":["import request from \"../request\";\r\n\r\nconst getTopicListUrl = \"/api/kafka/operate/getTopicList\";\r\nconst createTopicUrl = \"/api/kafka/operate/createTopic\";\r\nconst deleteTopicUrl = \"/api/kafka/operate/deleteTopic\";\r\nconst topicExistsUrl = \"/api/kafka/operate/topicExists\";\r\n//获取分区数据详情\r\nconst getTopicPartitionDetailUrl = \"/api/kafka/operate/getTopicPartitionDetail\";\r\n\r\nexport function getTopicList(zookeeper) {\r\n  return request.get(getTopicListUrl, {zookeeper: zookeeper});\r\n}\r\n\r\nexport function createTopic(zookeeper, topic, partitions, replication) {\r\n  return request.get(createTopicUrl, {\r\n    zookeeper: zookeeper,\r\n    topic: topic,\r\n    partitions: partitions,\r\n    replication: replication\r\n  });\r\n}\r\n\r\nexport function deleteTopic(zookeeper, topic) {\r\n  return request.get(deleteTopicUrl, {zookeeper: zookeeper, topic: topic});\r\n}\r\n\r\nexport function topicExists(zookeeper, topic) {\r\n  return request.get(topicExistsUrl, {zookeeper: zookeeper, topic: topic});\r\n}\r\n\r\nexport function getTopicPartitionDetail(zookeeper, topic) {\r\n  return request.get(getTopicPartitionDetailUrl, {zookeeper: zookeeper, topic: topic});\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/kafkaOperateApi.js","<template>\r\n  <div class=\"container\">\r\n    <el-row :gutter=\"5\">\r\n      <el-col :span=\"3\"><span>请选择zookeeper</span></el-col>\r\n      <el-col :span=\"4\">\r\n        <el-select v-model=\"zookeeper\" placeholder=\"请选择zookeeper\"\r\n                   @change=\"zookeeperChangeMethod\" size=\"mini\">\r\n          <el-option v-for=\"(item,index) in zookeeperList\"\r\n                     :key=\"index\"\r\n                     :label=\"item.name\"\r\n                     :value=\"item.address\">\r\n            <span style=\"float: left\">{{ item.name }}</span>\r\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.address }}</span>\r\n          </el-option>\r\n        </el-select>\r\n      </el-col>\r\n      <el-col :span=\"5\">\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"$router.push('/zookeeper/zookeeperServer')\">zookeeper管理\r\n        </el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row :gutter=\"20\" style=\"margin: 40px 0 0 0\">\r\n      <el-col :span=\"4\">\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"addTopicDialogShow = true\">添加Topic</el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"topicTableData.filter(data => !topicSearch || data.topic.toLowerCase().includes(topicSearch.toLowerCase()))\"\r\n      style=\"width: 870px\">\r\n      <el-table-column\r\n        prop=\"topic\"\r\n        label=\"Topic名称\"\r\n        width=\"400\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        sortable\r\n        prop=\"createDate\"\r\n        label=\"创建日期\"\r\n        :formatter=\"formatCreateDate\"\r\n        width=\"150\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"createBy\"\r\n        label=\"创建人\"\r\n        width=\"120\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        align=\"right\" width=\"200\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <el-input\r\n            v-model=\"topicSearch\"\r\n            size=\"mini\"\r\n            placeholder=\"输入关键字搜索\"></el-input>\r\n        </template>\r\n        <template slot-scope=\"scope\">\r\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"分区详情\" placement=\"top-start\">\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"primary\"\r\n              plain\r\n              icon=\"el-icon-view\"\r\n              @click=\"getTopicPartitionDetailMethod(scope.$index, scope.row)\">\r\n            </el-button>\r\n          </el-tooltip>\r\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"删除\" placement=\"top-start\">\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              plain\r\n              icon=\"el-icon-delete\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\">\r\n            </el-button>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n\r\n    <!--新增topic弹窗-->\r\n    <el-dialog title=\"添加Topic\"\r\n               :visible=\"addTopicDialogShow\"\r\n               width=\"45%\" @open=\"handleDialogOpen\" @close=\"handleDialogClose\">\r\n      <el-form ref=\"addTopicForm\" :model=\"addTopicForm\" status-icon label-width=\"100px\"\r\n               class=\"demo-ruleForm\">\r\n        <el-form-item label=\"Topic名称\" prop=\"topic\">\r\n          <el-col :span=\"20\">\r\n            <el-input v-model=\"addTopicForm.topic\"></el-input>\r\n          </el-col>\r\n        </el-form-item>\r\n        <el-form-item label=\"分区数\" prop=\"partitions\">\r\n          <el-col :span=\"20\">\r\n            <el-input v-model=\"addTopicForm.partitions\"></el-input>\r\n          </el-col>\r\n        </el-form-item>\r\n        <el-form-item label=\"副本数\" prop=\"replication\">\r\n          <el-col :span=\"20\">\r\n            <el-input v-model=\"addTopicForm.replication\"></el-input>\r\n          </el-col>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addTopicDialogShow = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm('addTopicForm')\">添 加</el-button>\r\n      </div>\r\n      <!--</router-link>-->\r\n    </el-dialog>\r\n\r\n\r\n    <el-dialog title=\"分区详情\"\r\n               :visible.sync=\"topicPartitionDetailDialogShow\" width=\"55%\">\r\n      <el-table\r\n        :data=\"topicPartitionDetailTableData\"\r\n        style=\"width: 800px\">\r\n        <el-table-column\r\n          prop=\"topic\"\r\n          label=\"Topic\"\r\n          width=\"350\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"partition\"\r\n          label=\"分区\"\r\n          width=\"50\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"address\"\r\n          label=\"副本分布\"\r\n          width=\"400\">\r\n        </el-table-column>\r\n      </el-table>\r\n      <!--</router-link>-->\r\n    </el-dialog>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n  import {\r\n    getTopicList,\r\n    createTopic,\r\n    deleteTopic,\r\n    topicExists,\r\n    getTopicPartitionDetail\r\n  } from '../../../../api/kafkaOperateApi';\r\n  import dateUtil from 'element-ui/src/utils/date';\r\n  import {getZooKeeperServerList, saveZookeeperServer, testConn} from '../../../../api/zookeeperApi'\r\n\r\n\r\n  export default {\r\n    name: \"\",\r\n    data() {\r\n      return {\r\n        zookeeper: '',\r\n        zookeeperList: [],\r\n        topicList: [],\r\n        partitions: 1,\r\n        replication: 1,\r\n        topic: 'hxh_test',\r\n        topicTableData: [],\r\n        topicSearch: '',\r\n        addTopicDialogShow: false,\r\n        topicPartitionDetailDialogShow: false,\r\n        addTopicForm: {\r\n          topic: '',\r\n          replication: 2,\r\n          partitions: 4\r\n\r\n        },\r\n        rules: {\r\n          // topic: [\r\n          //   {validator: checkTopic, trigger: 'blur'}\r\n          // ],\r\n          // server: [\r\n          //   {validator: checkServer, trigger: 'blur'}\r\n          // ],\r\n          // group: [\r\n          //   {validator: checkGroup, trigger: 'blur'}\r\n          // ]\r\n        },\r\n        topicPartitionDetailTableData: [],\r\n        loading: true\r\n      }\r\n    },\r\n    methods: {\r\n      zookeeperChangeMethod() {\r\n        this.getTopicListMethod();\r\n      },\r\n      getTopicListMethod() {\r\n        if (!this.zookeeper || this.zookeeper === '') {\r\n          this.loading = false;\r\n          return;\r\n        }\r\n        this.loading = true;\r\n        getTopicList(this.zookeeper).then(response => {\r\n          if (response) {\r\n            let data = response.data;\r\n            if (data.code === 200) {\r\n              data = data.data;\r\n              this.topicList = [];\r\n              this.topicTableData = [];\r\n              let date = new Date();\r\n              for (let i = 0; i < data.length; i++) {\r\n                this.topicList.push(data[i].topic);\r\n                this.topicTableData.push(data[i]);\r\n              }\r\n            }\r\n          }\r\n          this.loading = false;\r\n        });\r\n      },\r\n      getZooKeeperServerListMethod() {\r\n        getZooKeeperServerList().then(response => {\r\n          if (response) {\r\n            let data = response.data;\r\n            if (data.code === 200) {\r\n              data = data.data;\r\n              this.zookeeperList = [];\r\n              for (let i = 0; i < data.length; i++) {\r\n                this.zookeeperList.push(data[i]);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      },\r\n      getTopicPartitionDetailMethod(index, row) {\r\n        getTopicPartitionDetail(this.zookeeper, row.topic).then(response => {\r\n          if (response) {\r\n            let data = response.data;\r\n            if (data.code === 200) {\r\n              this.topicPartitionDetailTableData = [];\r\n              data = data.data;\r\n              for (let i = 0; i < data.length; i++) {\r\n                this.topicPartitionDetailTableData.push(data[i]);\r\n              }\r\n              this.topicPartitionDetailDialogShow = true;\r\n            }\r\n          }\r\n        })\r\n      },\r\n      formatCreateDate: function (row, column) {\r\n        let date = new Date(row.createDate);\r\n        return dateUtil.format(date, 'yyyy-MM-dd HH:mm:ss');\r\n      },\r\n      deleteTopicMethod(zookeeper, topic) {\r\n        deleteTopic(zookeeper, topic).then(response => {\r\n          if (response) {\r\n            let data = response.data;\r\n            if (data.code === 200) {\r\n              this.$message({\r\n                //消息弹窗组件,类似toast\r\n                showClose: true,\r\n                message: topic + '删除成功',\r\n                type: 'success'\r\n              });\r\n              //topic 的变化不会这么快，确定删除后，直接改变数组内数据即可\r\n              let topicTableDataCopy = this.topicTableData;\r\n              this.topicTableData = [];\r\n              for (let i = 0; i < topicTableDataCopy.length; i++) {\r\n                if (topicTableDataCopy[i].topic !== topic) {\r\n                  this.topicTableData.push(topicTableDataCopy[i]);\r\n                }\r\n              }\r\n            } else {\r\n              this.$message({\r\n                //消息弹窗组件,类似toast\r\n                showClose: true,\r\n                message: data.msg,\r\n                type: 'error'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      },\r\n      topicExistsMethod() {\r\n        topicExists(this.zookeeper, this.topic).then(response => {\r\n          if (response) {\r\n            let data = response.data;\r\n            if (data.code === 200) {\r\n              this.$message({\r\n                //消息弹窗组件,类似toast\r\n                showClose: true,\r\n                message: this.topic + \"存在\",\r\n                type: 'success'\r\n              });\r\n            } else if (data.code === 201) {\r\n              this.$message({\r\n                //消息弹窗组件,类似toast\r\n                showClose: true,\r\n                message: this.topic + \"不存在\",\r\n                type: 'success'\r\n              });\r\n            } else {\r\n              this.$message({\r\n                //消息弹窗组件,类似toast\r\n                showClose: true,\r\n                message: data.msg,\r\n                type: 'error'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      },\r\n      handleEdit(index, row) {\r\n        console.log(index, row);\r\n      },\r\n      handleDelete(index, row) {\r\n        this.$confirm('确定删除?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          //id, address, name, isDeleted, tag\r\n          this.deleteTopicMethod(this.zookeeper, row.topic);\r\n          // this.topicTableData.splice(row,1);\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n        });\r\n      },\r\n      handleDialogOpen() {\r\n        //刷新邮箱列表\r\n        this.addTopicDialogShow = true;\r\n      },\r\n      handleDialogClose() {\r\n        this.resetForm('addTopicForm');\r\n        this.addTopicDialogShow = false;\r\n      },\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            createTopic(this.zookeeper, this.addTopicForm.topic, this.addTopicForm.partitions, this.addTopicForm.replication).then(response => {\r\n              if (response) {\r\n                let data = response.data;\r\n                if (data.code === 200) {\r\n                  this.$message({\r\n                    //消息弹窗组件,类似toast\r\n                    showClose: true,\r\n                    message: this.topic + '创建成功',\r\n                    type: 'success'\r\n                  });\r\n                  this.getTopicListMethod();\r\n                  this.handleDialogClose();\r\n                } else {\r\n                  this.$message({\r\n                    //消息弹窗组件,类似toast\r\n                    showClose: true,\r\n                    message: data.msg,\r\n                    type: 'error'\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          }\r\n        })\r\n      },\r\n      resetForm(formName) {\r\n        this.$nextTick(() => {\r\n          if (this.$refs[formName] !== undefined) {\r\n            this.$refs[formName].resetFields();\r\n          }\r\n        })\r\n      },\r\n    },\r\n    mounted() {\r\n      this.getZooKeeperServerListMethod();\r\n      this.getTopicListMethod();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/pages/kafka/operate/Topic.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('el-row',{attrs:{\"gutter\":5}},[_c('el-col',{attrs:{\"span\":3}},[_c('span',[_vm._v(\"请选择zookeeper\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-select',{attrs:{\"placeholder\":\"请选择zookeeper\",\"size\":\"mini\"},on:{\"change\":_vm.zookeeperChangeMethod},model:{value:(_vm.zookeeper),callback:function ($$v) {_vm.zookeeper=$$v},expression:\"zookeeper\"}},_vm._l((_vm.zookeeperList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.name,\"value\":item.address}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(_vm._s(item.address))])])}),1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":5}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.$router.push('/zookeeper/zookeeperServer')}}},[_vm._v(\"zookeeper管理\\n      \")])],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"40px 0 0 0\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.addTopicDialogShow = true}}},[_vm._v(\"添加Topic\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"870px\"},attrs:{\"data\":_vm.topicTableData.filter(function (data) { return !_vm.topicSearch || data.topic.toLowerCase().includes(_vm.topicSearch.toLowerCase()); })}},[_c('el-table-column',{attrs:{\"prop\":\"topic\",\"label\":\"Topic名称\",\"width\":\"400\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"sortable\":\"\",\"prop\":\"createDate\",\"label\":\"创建日期\",\"formatter\":_vm.formatCreateDate,\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createBy\",\"label\":\"创建人\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"right\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"header\",fn:function(scope){return [_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"输入关键字搜索\"},model:{value:(_vm.topicSearch),callback:function ($$v) {_vm.topicSearch=$$v},expression:\"topicSearch\"}})]}},{key:\"default\",fn:function(scope){return [_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"分区详情\",\"placement\":\"top-start\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\",\"icon\":\"el-icon-view\"},on:{\"click\":function($event){return _vm.getTopicPartitionDetailMethod(scope.$index, scope.row)}}})],1),_vm._v(\" \"),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"删除\",\"placement\":\"top-start\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"plain\":\"\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}})],1)]}}])})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"添加Topic\",\"visible\":_vm.addTopicDialogShow,\"width\":\"45%\"},on:{\"open\":_vm.handleDialogOpen,\"close\":_vm.handleDialogClose}},[_c('el-form',{ref:\"addTopicForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.addTopicForm,\"status-icon\":\"\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"Topic名称\",\"prop\":\"topic\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{model:{value:(_vm.addTopicForm.topic),callback:function ($$v) {_vm.$set(_vm.addTopicForm, \"topic\", $$v)},expression:\"addTopicForm.topic\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"分区数\",\"prop\":\"partitions\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{model:{value:(_vm.addTopicForm.partitions),callback:function ($$v) {_vm.$set(_vm.addTopicForm, \"partitions\", $$v)},expression:\"addTopicForm.partitions\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"副本数\",\"prop\":\"replication\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{model:{value:(_vm.addTopicForm.replication),callback:function ($$v) {_vm.$set(_vm.addTopicForm, \"replication\", $$v)},expression:\"addTopicForm.replication\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addTopicDialogShow = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('addTopicForm')}}},[_vm._v(\"添 加\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"分区详情\",\"visible\":_vm.topicPartitionDetailDialogShow,\"width\":\"55%\"},on:{\"update:visible\":function($event){_vm.topicPartitionDetailDialogShow=$event}}},[_c('el-table',{staticStyle:{\"width\":\"800px\"},attrs:{\"data\":_vm.topicPartitionDetailTableData}},[_c('el-table-column',{attrs:{\"prop\":\"topic\",\"label\":\"Topic\",\"width\":\"350\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"partition\",\"label\":\"分区\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"副本分布\",\"width\":\"400\"}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-442dc7fa\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/pages/kafka/operate/Topic.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-442dc7fa\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Topic.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Topic.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Topic.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-442dc7fa\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Topic.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-442dc7fa\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pages/kafka/operate/Topic.vue\n// module id = null\n// module chunks = ","import request from \"../request\";\r\n\r\nconst getZooKeeperServerListUrl = \"/api/zookeeper/getZooKeeperServerList\";\r\nconst saveZookeeperServerUrl = \"/api/zookeeper/save\";\r\nconst testConnUrl = \"/api/zookeeper/testConn\";\r\n//获取分区数据详情\r\nconst getTopicPartitionDetailUrl = \"/api/kafka/operate/getTopicPartitionDetail\";\r\n\r\nexport function getZooKeeperServerList() {\r\n  return request.get(getZooKeeperServerListUrl);\r\n}\r\n\r\nexport function saveZookeeperServer(address, name, deleted) {\r\n  return request.post(saveZookeeperServerUrl, {\r\n    \"address\": address,\r\n    \"name\": name,\r\n    \"deleted\": deleted\r\n  });\r\n}\r\n\r\nexport function testConn(address) {\r\n  return request.get(testConnUrl, {address: address});\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/zookeeperApi.js"],"sourceRoot":""}