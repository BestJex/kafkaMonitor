webpackJsonp([7],{"3jL2":function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=s("pcot"),o=s("uSIf"),a={name:"Login",data:()=>({form:{username:"",password:"",tips:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},registerRules:{name:[{required:!0,message:"请输入昵称",trigger:"blur"}],username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],rePassword:[{required:!0,message:"请再次输入密码",trigger:"blur"}],email:[{validator:(e,r,s)=>{let t=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");""===r?s(new Error("请输入邮箱地址")):t.test(r)?s():s(new Error("邮箱地址不合法"))},trigger:"blur"}]},registerForm:{name:"",username:"",password:"",rePassword:"",email:"",tips:""},loginShow:!0}),methods:{submitForm(e){if("registerForm"===e){let r=this;this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;r.registerForm.password===r.registerForm.rePassword?Object(t.d)(this.registerForm.name,this.registerForm.username,this.registerForm.password,this.registerForm.email).then(e=>{let r=e.data;if(200===r.code){let e=r.data;console.info(e),this.$store.state.name=e.name,this.$store.state.username=e.username,this.$message({showClose:!0,message:r.msg,type:"success"}),Object(t.a)(e.username,e.password).then(e=>{let r=e.data;200===r.code?(this.$message({showClose:!0,message:"激活邮件发送成功，请到邮箱中激活账号",type:"success"}),this.$router.push("/")):this.$message({showClose:!0,message:r.msg,type:"error"})})}else this.$message({showClose:!0,message:r.msg,type:"error"})}):this.$message({showClose:!0,message:"密码输入不一致",type:"error"})})}"form"===e&&this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;Object(t.b)(this.form.username,this.form.password).then(e=>{let r=e.data;if(200===r.code){let e=r.data;Object(o.c)("token",e.token,2),this.$store.state.name=e.name,this.$store.state.username=e.username,this.$router.push("/")}else this.$message({showClose:!0,message:r.msg,type:"error"})})})},resetForm(e){this.$refs[e].resetFields()},handleRegisterClick(){this.loginShow=!this.loginShow,this.resetForm("registerForm")}}},i={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"login"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.loginShow,expression:"loginShow"}],staticClass:"login-wrap"},[s("div",{staticClass:"login-title"},[e._v("后台管理系统")]),e._v(" "),s("el-form",{ref:"form",staticClass:"login-content",attrs:{model:e.form,rules:e.rules,"label-width":"0px"}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submitForm("form")}},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}},[s("template",{slot:"prepend"},[e._v("帐号")])],2)],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submitForm("form")}},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}},[s("template",{slot:"prepend"},[e._v("密码")])],2)],1),e._v(" "),s("el-form-item",{staticClass:"login-btn"},[s("el-row",[s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("form")}}},[e._v("登录")])],1),e._v(" "),s("el-row",[s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleRegisterClick()}}},[e._v("注册")])],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.loginShow,expression:"!loginShow"}],staticClass:"register-wrap"},[s("div",{staticClass:"login-title"},[e._v("用户注册")]),e._v(" "),s("el-form",{ref:"registerForm",staticClass:"login-content",attrs:{model:e.registerForm,rules:e.registerRules,"label-width":"0px"}},[s("el-form-item",{attrs:{prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入用户昵称"},model:{value:e.registerForm.name,callback:function(r){e.$set(e.registerForm,"name",r)},expression:"registerForm.name"}},[s("template",{slot:"prepend"},[e._v("用户昵称")])],2)],1),e._v(" "),s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入登录账号"},model:{value:e.registerForm.username,callback:function(r){e.$set(e.registerForm,"username",r)},expression:"registerForm.username"}},[s("template",{slot:"prepend"},[e._v("登录帐号")])],2)],1),e._v(" "),s("el-form-item",{attrs:{prop:"email"}},[s("el-input",{attrs:{placeholder:"请输入登录账号"},model:{value:e.registerForm.email,callback:function(r){e.$set(e.registerForm,"email",r)},expression:"registerForm.email"}},[s("template",{slot:"prepend"},[e._v("注册邮箱")])],2)],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}},[s("template",{slot:"prepend"},[e._v("登录密码")])],2)],1),e._v(" "),s("el-form-item",{attrs:{prop:"rePassword"}},[s("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},model:{value:e.registerForm.rePassword,callback:function(r){e.$set(e.registerForm,"rePassword",r)},expression:"registerForm.rePassword"}},[s("template",{slot:"prepend"},[e._v("密码确认")])],2)],1),e._v(" "),s("el-form-item",{staticClass:"login-btn"},[s("el-row",[s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("registerForm")}}},[e._v("注册")])],1),e._v(" "),s("el-row",[s("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.handleRegisterClick()}}},[e._v("返回登录")])],1)],1)],1)],1)])},staticRenderFns:[]};var l=s("VU/8")(a,i,!1,function(e){s("UyKc")},"data-v-4a169402",null);r.default=l.exports},UyKc:function(e,r){},pcot:function(e,r,s){"use strict";r.b=function(e,r){return t.a.post(o,{username:e,password:r})},r.d=function(e,r,s,o){return t.a.post(a,{name:e,username:r,password:s,email:o})},r.a=function(e,r){return t.a.post(i,{username:e,password:r})},r.c=function(){return t.a.get(l)};var t=s("7I1f");const o="/user/login",a="/user/register",i="/user/active",l="/user/loginOut"}});
//# sourceMappingURL=7.335269d37096cdcd8915.js.map