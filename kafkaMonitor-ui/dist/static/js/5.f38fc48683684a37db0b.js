webpackJsonp([5],{Og0r:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("7I1f"),a="/api/kafka/operate/getTopicList",r="/api/kafka/operate/createTopic",n="/api/kafka/operate/deleteTopic",s="/api/kafka/operate/topicExists",c="/api/kafka/operate/getTopicPartitionDetail";var l=o("fc7Y"),p=o.n(l),d=o("PKbQ"),u={name:"",data:function(){return{zookeeper:"",zookeeperList:[],topicList:[],partitions:1,replication:1,topic:"hxh_test",topicTableData:[],topicSearch:"",addTopicDialogShow:!1,topicPartitionDetailDialogShow:!1,addTopicForm:{topic:"",replication:2,partitions:4},rules:{},topicPartitionDetailTableData:[],loading:!0}},methods:{zookeeperChangeMethod:function(){this.getTopicListMethod()},getTopicListMethod:function(){var e,t=this;this.zookeeper&&""!==this.zookeeper?(this.loading=!0,(e=this.zookeeper,i.a.get(a,{zookeeper:e})).then(function(e){if(e){var o=e.data;if(200===o.code){o=o.data,t.topicList=[],t.topicTableData=[];new Date;for(var i=0;i<o.length;i++)t.topicList.push(o[i].topic),t.topicTableData.push(o[i])}}t.loading=!1})):this.loading=!1},getZooKeeperServerListMethod:function(){var e=this;Object(d.a)().then(function(t){if(t){var o=t.data;if(200===o.code){o=o.data,e.zookeeperList=[];for(var i=0;i<o.length;i++)e.zookeeperList.push(o[i])}}})},getTopicPartitionDetailMethod:function(e,t){var o,a,r=this;(o=this.zookeeper,a=t.topic,i.a.get(c,{zookeeper:o,topic:a})).then(function(e){if(e){var t=e.data;if(200===t.code){r.topicPartitionDetailTableData=[],t=t.data;for(var o=0;o<t.length;o++)r.topicPartitionDetailTableData.push(t[o]);r.topicPartitionDetailDialogShow=!0}}})},formatCreateDate:function(e,t){var o=new Date(e.createDate);return p.a.format(o,"yyyy-MM-dd HH:mm:ss")},deleteTopicMethod:function(e,t){var o=this;(function(e,t){return i.a.get(n,{zookeeper:e,topic:t})})(e,t).then(function(e){if(e){var i=e.data;if(200===i.code){o.$message({showClose:!0,message:t+"删除成功",type:"success"});var a=o.topicTableData;o.topicTableData=[];for(var r=0;r<a.length;r++)a[r].topic!==t&&o.topicTableData.push(a[r])}else o.$message({showClose:!0,message:i.msg,type:"error"})}})},topicExistsMethod:function(){var e,t,o=this;(e=this.zookeeper,t=this.topic,i.a.get(s,{zookeeper:e,topic:t})).then(function(e){if(e){var t=e.data;200===t.code?o.$message({showClose:!0,message:o.topic+"存在",type:"success"}):201===t.code?o.$message({showClose:!0,message:o.topic+"不存在",type:"success"}):o.$message({showClose:!0,message:t.msg,type:"error"})}})},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){var o=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.deleteTopicMethod(o.zookeeper,t.topic)}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},handleDialogOpen:function(){this.addTopicDialogShow=!0},handleDialogClose:function(){this.resetForm("addTopicForm"),this.addTopicDialogShow=!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){var o,a,n,s;e&&(o=t.zookeeper,a=t.addTopicForm.topic,n=t.addTopicForm.partitions,s=t.addTopicForm.replication,i.a.get(r,{zookeeper:o,topic:a,partitions:n,replication:s})).then(function(e){if(e){var o=e.data;200===o.code?(t.$message({showClose:!0,message:t.topic+"创建成功",type:"success"}),t.getTopicListMethod(),t.handleDialogClose()):t.$message({showClose:!0,message:o.msg,type:"error"})}})})},resetForm:function(e){var t=this;this.$nextTick(function(){void 0!==t.$refs[e]&&t.$refs[e].resetFields()})}},mounted:function(){this.getZooKeeperServerListMethod(),this.getTopicListMethod()}},h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("el-row",{attrs:{gutter:5}},[o("el-col",{attrs:{span:3}},[o("span",[e._v("请选择zookeeper")])]),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-select",{attrs:{placeholder:"请选择zookeeper",size:"mini"},on:{change:e.zookeeperChangeMethod},model:{value:e.zookeeper,callback:function(t){e.zookeeper=t},expression:"zookeeper"}},e._l(e.zookeeperList,function(t,i){return o("el-option",{key:i,attrs:{label:t.name,value:t.address}},[o("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),o("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.address))])])}),1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.$router.push("/zookeeper/zookeeperServer")}}},[e._v("zookeeper管理\n      ")])],1)],1),e._v(" "),o("el-row",{staticStyle:{margin:"40px 0 0 0"},attrs:{gutter:20}},[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addTopicDialogShow=!0}}},[e._v("添加Topic")])],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"870px"},attrs:{data:e.topicTableData.filter(function(t){return!e.topicSearch||t.topic.toLowerCase().includes(e.topicSearch.toLowerCase())})}},[o("el-table-column",{attrs:{prop:"topic",label:"Topic名称",width:"400"}}),e._v(" "),o("el-table-column",{attrs:{sortable:"",prop:"createDate",label:"创建日期",formatter:e.formatCreateDate,width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"createBy",label:"创建人",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{align:"right",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){return[o("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.topicSearch,callback:function(t){e.topicSearch=t},expression:"topicSearch"}})]}},{key:"default",fn:function(t){return[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分区详情",placement:"top-start"}},[o("el-button",{attrs:{size:"mini",type:"primary",plain:"",icon:"el-icon-view"},on:{click:function(o){return e.getTopicPartitionDetailMethod(t.$index,t.row)}}})],1),e._v(" "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[o("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-delete"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:"添加Topic",visible:e.addTopicDialogShow,width:"45%"},on:{open:e.handleDialogOpen,close:e.handleDialogClose}},[o("el-form",{ref:"addTopicForm",staticClass:"demo-ruleForm",attrs:{model:e.addTopicForm,"status-icon":"","label-width":"100px"}},[o("el-form-item",{attrs:{label:"Topic名称",prop:"topic"}},[o("el-col",{attrs:{span:20}},[o("el-input",{model:{value:e.addTopicForm.topic,callback:function(t){e.$set(e.addTopicForm,"topic",t)},expression:"addTopicForm.topic"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"分区数",prop:"partitions"}},[o("el-col",{attrs:{span:20}},[o("el-input",{model:{value:e.addTopicForm.partitions,callback:function(t){e.$set(e.addTopicForm,"partitions",t)},expression:"addTopicForm.partitions"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"副本数",prop:"replication"}},[o("el-col",{attrs:{span:20}},[o("el-input",{model:{value:e.addTopicForm.replication,callback:function(t){e.$set(e.addTopicForm,"replication",t)},expression:"addTopicForm.replication"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addTopicDialogShow=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("addTopicForm")}}},[e._v("添 加")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"分区详情",visible:e.topicPartitionDetailDialogShow,width:"55%"},on:{"update:visible":function(t){e.topicPartitionDetailDialogShow=t}}},[o("el-table",{staticStyle:{width:"800px"},attrs:{data:e.topicPartitionDetailTableData}},[o("el-table-column",{attrs:{prop:"topic",label:"Topic",width:"350"}}),e._v(" "),o("el-table-column",{attrs:{prop:"partition",label:"分区",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{prop:"address",label:"副本分布",width:"400"}})],1)],1)],1)},staticRenderFns:[]};var f=o("VU/8")(u,h,!1,function(e){o("cAIJ")},"data-v-8b679d80",null);t.default=f.exports},PKbQ:function(e,t,o){"use strict";t.a=function(){return i.a.get(a)},t.b=function(e,t,o){return i.a.post(r,{address:e,name:t,deleted:o})},t.c=function(e){return i.a.get(n,{address:e})};var i=o("7I1f"),a="/api/zookeeper/getZooKeeperServerList",r="/api/zookeeper/save",n="/api/zookeeper/testConn"},cAIJ:function(e,t){}});
//# sourceMappingURL=5.f38fc48683684a37db0b.js.map